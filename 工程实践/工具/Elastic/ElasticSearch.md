

# ElasticSearch



## 基础

### 核心概念
* 索引：用于存储数据的逻辑容器（类似于数据库中的表）
* 文档：基本的存储单元，存储在索引中的json对象
* 字段：最小的单个数据单元
* 映射：类似于数据库中的Schema（表结构）

* 集群：一组 Elastic 节点的集合
* 节点：一个 Elastic 实例，在集群中被划分为不同的角色
* 分片：包含索引数据的子集，看出独立的索引
* 副本：副本分片，是主分片的复制版本


### 映射
* 将数据结构与索引相关联起来
* 决定了如何存储数据、处理搜索、分析请求
* 包括：元字段、数据类型字段
* 一个字段可以设置多种不同的数据类型

#### 元字段
* `_index`: 文档所属的索引
* `_id`:  文档ID
* `_source`: 文档正文的json对象
* `_size`: source字段的大小
* `_meta`: 元数据
* `_routing`: 文档路由


#### 数据类型
* `binary`: 二进制类型、编码为base64
* `boolean`: 布尔类型
* `keyword`: 支持精准匹配的类型
* `number`: 数值类型
* `date`: 日期类型
* `text`: 全文检索类型
* `Array`: 数组类型
* `Object`: json对象类型
    * 存储时字段部分会被扁平化为键值对
* `Nested`: 嵌套数据类型
    * 允许对象以彼此独立的方式进行索引




## 基本操作

### 删除文档
* 删除时，ElasticSearch先将其标记为“已删除”，在后续的段合并时，被删除的文档才会彻底删除并释放空间