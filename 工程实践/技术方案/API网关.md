

# API网关



## 概述

### 架构
* 一个总网关接入所有流量（流量网关）
* 多个二级子网关，做各个子系统的接入（业务网关）

![](http://picbed.cc12703.com/20221112015621.png)


### 功能

* 请求路由
* 服务注册
* 负载均衡
* 弹性设计：异步、重试、幂等、流控、熔断、监视
* 安全设计：SSL 加密及证书管理、Session 验证、授权、数据校验
* 灰度发布


### 类型

#### 流量网关
* 控制流量进入集群的网关
* 负责：全局流量监控、日志记录、全局限流、黑白名单控制

#### 业务网关
* 更靠近我们的业务，也就是与服务器应用层打交道
* 负责：协议适配、熔断限流，服务编排



### 常见网关

#### OpenResty
* 一个流量网关
* 基于Nginx与Lua的高性能Web平台


#### Kong
* 一个流量网关
* 基于OpenResty开发
* 一个云原生、快速、可扩展、分布式的API网关


#### Zuul
* 核心是过滤器，负责应用程序的业务逻辑
* Zuul1.0是同步阻塞架构
* Zuul2.0是异步非阻塞架构


#### Spring Cloud Gateway
* 底层使用了Netty


#### 对比
![](http://picbed.cc12703.com/20221113233533.png)

