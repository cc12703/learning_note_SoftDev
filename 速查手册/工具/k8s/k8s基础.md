

# k8s基础


## 概述
* 一个基于容器的分布式架构解决系统
* 一站式的分布式应用的开发、支撑平台
* 自动的部署、扩容、管理分布式应用


### 功能
* 面向容器：启动、停止、管理独立容器的生命周期
* 服务发现：运行应用的不同部分发现、通信其他部分
* 负载均衡：将流量分布式的分配给应用



## 核心概念

### Service
* 对分布式服务的一种抽象

#### 特征
* 唯一的名字
* 固定的入口：虚拟IP和端口
* 提供某种远程服务能力
* 将这种服务映射到一组容器应用上


### Pod
* 将Service映射到容器中

#### 特征
* 运行在工作节点中，一个节点运行几个百Pod
* 内部运行着一个Pause容器，多个业务容器
* 所有业务容器都共享Pause容器的网络栈和挂载卷


## 分布式

* 整个集群由多个机器组成，机器会有分工
* 机器被分为：主节点、工作节点
* 使用`etcd`存储数据

### 主节点（Master）
* 集群的控制节点（控制平面），是整个系统的大脑
* 通常需要3台服务器，保证高可用性

#### 组件
* `api-server`：提供REST接口、对资源操作的CURD接口
* `scheduler`：负责资源的调度（`Pod`调度）
* `controller-manager`：资源对象的自动化控制中心

### 工作节点（Node）
* 集群中的工作负载阶段，用于运行Docker容器

#### 组件
* `kubelet`：负责容器的创建、启停。与主节点协作实现集群管理
* `kube-proxy`：实现`Service`之间的通信、负载均衡






