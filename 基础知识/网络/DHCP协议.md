

# DHCP协议


[TOC]


## 概述
* DHCP：动态主机配置协议
* 基于BOOTP协议改进而来


### 功能
* 地址管理：用于IP地址的动态分配，并提供地址租用服务
    * 地址分配方法：自动分配、动态分配、手动分配
* 配置数据交付



## 流程
1. 客户端发送`DISCOVER`消息
    * 源IP地址为0
1. 服务器发生`OFFER`消息（多个服务器）
    * 包含提供的IP地址
1. 客户端选择配置，发送`REQUEST`消息（广播消息）
1. 服务器完成绑定，发送`ACK`消息
1. 客户端验证地址，通过ARP/ACD


## 帧格式

![](http://picbed.cc12703.com/20230128234332.png)

* Op：值为请求、应答
* HW长度：存储MAC地址
* 跳步数：记录传输过程中经过中继的次数
* 事务ID: 由客户端生成，用于应答-请求匹配