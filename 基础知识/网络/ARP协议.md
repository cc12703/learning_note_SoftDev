

# ARP协议

[TOC]


## 概述

* 地址解析：在IPv4地址和各种硬件地址之间进行映射
* 功能：提供从网络层地址到相关硬件地址的动态映射


## 流程
1. 查看本地APR缓存表
1. 发送ARP广播请求（包含目的主机的IP地址）
1. 目标主机发送应答报文（直接发送给请求方）
1. 缓存映射信息


## 帧格式

![](http://picbed.cc12703.com/20230128224501.png)

 * ARP请求，DST以太网地址为广播地址（全为1）
 * Op字段：操作类型
    * ARP请求
    * ARP应答
    * RARP请求
    * RARP应答

## 功能

### 免费ARP

#### 方法
* 发送方协议地址和目的协议地址相同

#### 功能
* 确定另一台主机是否配置了相同的IP地址
* 更新其他主机的ARP缓存条目


### 地址冲突检测（ACD）

#### 方法
* 使用`ARP探测分组`和`ARP通告分组`
* `ARP探测分组`中发送方协议地址为0