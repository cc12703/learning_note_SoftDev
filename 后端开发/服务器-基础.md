

# 服务器-基础



## 术语


### 带宽
* 单位：`bits/s`或`bps` 单位时间内的比特数
* 含义：数据的发送速度
	* 例子：百兆网卡指网卡的最大发送速度为`100Mbps`

#### 限制带宽
* 原因：带宽是有限的
* 方法：限制交换机对于你主机数据的接收速度
	* 原因：数据链路层的流量控制是通过控制接收方来实现的，接收方的接收能力


### 下载速度
* 单位：`Bytes/s` 单位时间内的字节数
* 含义：单位时间从服务器到达用户PC的数据量的多少
* 计算公式：下载速度 = 数据量字节数 / 响应时间


### 响应时间
* 含义：数据从服务器发送直到完全到达用户PC的这段时间
* 构成：响应时间 = 发送时间 + 传播时间 + 处理时间
* 计算公式：
	* 发送时间 = 数据量比特数 / 带宽
	* 传播时间 = 传播距离 / 传播速度
	* 处理时间 = 数据在交换节点队列中的排队时间


### 吞吐率
* 单位：`reqs/s` 单位时间内服务器处理的请求数
* 作用：描述Web服务器的并发能力
* 估算方法：压力测试

### 压力测试

#### 压力描述
* 并发用户数：在某一时刻**同时**向服务器发送请求的用户总数
* 总请求数

#### 请求等待时间
* 用户平均请求等待时间
	* 作用：衡量服务器在一定并发用户下，对于单个用户的服务质量
* 服务器平均请求处理时间
	* 作用：衡量服务器在一定并发用户下，服务器的整体服务质量



## 发展过程

### 阶段1
* 应用程序、数据库、文件等所有资源都运行在一台服务器上

### 阶段2
* 应用服务和数据服务分离
* 应用程序、数据库、文件运作在三台服务器上

### 阶段3
* 使用缓存改善性能
* 类型：应用服务器上的本地缓存、分布式缓存服务器

### 阶段4
* 使用应用服务器集群改善并发能力
* 通过负载均衡器，分发用户请求

### 阶段5
* 数据库读写分离
* 形式：主从数据库
	1. 写数据时，访问主数据库
	1. 主数据库通过主从复制将数据同步到从数据库
	1. 读数据时，访问从数据库

### 阶段6
* 使用反向代理、CDN加速响应
* 基本原理都是缓存数据


## 并发策略

### IO模型

