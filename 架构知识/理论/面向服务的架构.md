

# 面向服务的架构

* `SOP`: Service-Oriented Architecture


## 定义

### 应用角度
* 一种应用框架，将业务应用划分为单独的业务功能和流程，称为服务
* SOP用于构建、部署、整合这些服务


### 原理角度
* 一种组件模型，将不同功能单元通过定义良好的接口联系起来


## 参考架构

### 连接服务
* `ESB`（企业服务总线）: 是一种架构模式
* 以 "总线" 模式来管理、集成应用

### 功能
* 服务注册管理
* 传输数据，对数据进行转换
* 解耦服务的请求者和提供者


### 业务逻辑服务

#### 应用和信息访问服务
* 作用：整合已有应用
* `可接入服务`：通过各种消息通信模式，包装应用到总线上
* `事件发现服务`：通过事件通知，将数据变化发布到总线上

#### 业务应用服务
* 作用：开发新应用
* `组件服务`：提供运行时容器管理服务
* `核心服务`：提供运行时服务（内存管理、对象实例化、对象池）
* `接口服务`：提供和其他系统集成的接口

#### 伙伴服务
* 作用：整合客户、业务伙伴的系统
* `社区服务`：以交易中心为主的集中式管理、以伙伴为中心的自我管理
* `文档服务`：提供用于交换的文档格式
* `协议服务`：为文档的交互提供传输层的支持


### 控制服务

#### 信息服务
* 作用：提供对分布式、异构数据的透明访问
* `联邦服务`



## 协议和规范

![](http://picbed.cc12703.com/20250705141804.png)

### UDDI协议
* `统一描述、发现和集成协议`
* 是一种基础的系统构筑模块


### WSDL规范
* `Web服务描述语言`
* 用于描述Web服务、如何与Web服务通信的XML语言

#### 属性
* 服务所提供的操作
* 交互的数据格式和必要协议
* 协议相关的地址

#### 文档
* 以端口集合的形式来描述Web服务
* 描述包括：一组操作、消息抽象定义、消息绑定的操作、具体协议、网络端点规范
* 类型：服务接口、服务实现


### SOAP协议
* 一种用于描述交换信息的、基于XML的协议

#### 部分
* 封装：信息的内容、谁发送、谁接收并处理
* 编码规则：要使用的数据类型的实例
* RPC表示：远程调用和应答的协定
* 绑定：交换信息用的底层协议


### REST规范
* `Representational State Transfer` 表述性状态转移
* 一种设计风格
* 以资源为中心进行构建（使用URI来标识资源）
* 用表述描述资源在某一个时间的状态（表现形式有HTML、JSON、XML）

#### 状态类型
* 应用状态：保存在客户端、对某个时间内用户会话相关信息的快照
* 资源状态：保存在服务器、对某个时间资源请求表述的快照
