

# 层次式架构

## 总体

### 思想
* 将系统组织成一种层次结构
* 每一层为上层服务，作为下层客户



### 基本划层

* 表现层
* 中间层
* 访问层
* 数据层

#### 图示
![](http://picbed.cc12703.com/20250710224534762.png)

## 表现层设计

### MVC模式
* `Model-View-Controller`
* 将应用分成：控制器、模型、视图，三个模块
* 控制器：接收用户输入并调用模型和视图完成功能
* 模型：实现业务数据和业务逻辑
* 视图：显示相关数据并接收用户输入的数据

#### 图示
![](http://picbed.cc12703.com/20250712194556950.png)


#### 优点
* 允许扩展多种用户界面
* 更容易维护和扩展


### MVP模式
* `Model-View-Presenter`
* 从MVC模式演变而来
* 视图不直接访问模式，而是通过`Presenter`进行


#### 图示
![](http://picbed.cc12703.com/20250712220252256.png)

#### 优点
* 模型和视图完全分离
* 将一个`Presenter`用于多个视图，而不用修改其逻辑


### MVVM模型
* `Model-View-ViewModel`
* 视图模型是核心，用于视图和模型的交互。
* 通过DataBinding技术来实现视图和模型的双向绑定


#### 图示
![](https://raw.githubusercontent.com/cc12703/picbed/main/20250712222833491.png)


#### 优点
* 数据和视图是双向绑定
* 适用于数据驱动的场景



## 动态生成

### 要点
* 用XML生成配置文件和元数据
* 按不同需求生成界面


### 组件
* 界面配置：界面的静态定义
* 界面定制：用户对界面进行动态修改
* 界面动态生成：通过读取XML文件和数据库，运行时由界面元素动态生成界面



## 中间层设计


### 要点
* 业务逻辑组件分为：接口、实现类
* 接口用于定义业务逻辑组件（系统运行的核心）
* 实现以DAO组件为基础

### 实体设计
* 表示方法：XML, 通用DataSet, 有类型的DataSet


### 框架

#### 图示
![](https://raw.githubusercontent.com/cc12703/picbed/main/20250712230621674.png)


#### 要点
* 采用`业务容器`的方式来构建
* 使用`Domain Model-Service-Control`思想来实现
    * 实现服务和服务控制之间的分离
* `Domain Model`：领域层业务对象
* `Service`：业务过程的实现部分
* `Control`：服务控制器，用于切换不同的服务



## 数据访问层设计


### 模式
* 在线访问：占用一个数据库连接，所有操作都通过该连接进行
* DAO：用于分离底层的数据操作和高层的业务逻辑
    * `Data Access Object`
* DTO：一组对象或数据容器，可以跨进程传输，本身不包含业务逻辑
    * `Data Transfer Object`
* 离线数据：以数据为中心
* ORM：将代码中的对象和数据库中的关系表映射起来
    * `Object/Relation Mapping`